# 响应式局域网文件传输应用

基于WebRTC的响应式局域网文件传输应用，专门优化了移动端体验，支持小米14和联想Y700四代等现代移动设备。

## ✨ 新功能特性

### 📱 移动端优化
- **完全响应式设计**：自动适配手机、平板和桌面设备
- **移动端专属布局**：抽屉式侧边栏，紧凑的卡片设计
- **触摸友好**：44px+最小点击区域，适合手指操作
- **设备检测**：智能识别iOS/Android设备并应用特定优化

### 🎯 Chrome移动端专项优化
- **防缩放处理**：禁用双击缩放，固定viewport
- **输入框优化**：16px字体防止iOS Safari自动缩放
- **滚动优化**：启用-webkit-overflow-scrolling: touch
- **安全区域适配**：支持iPhone刘海屏和横屏模式

### 🚀 性能优化
- **动画优化**：移动端减少非必要动画
- **懒加载**：按需加载资源
- **电池优化**：在低电量模式下减少视觉效果
- **网络优化**：在慢网络环境下简化UI

### 🌙 用户体验增强
- **暗色模式支持**：跟随系统主题
- **高对比度支持**：无障碍性增强
- **减少动画支持**：尊重用户偏好设置
- **加载动画**：优雅的启动体验

## 📱 移动端特性

### 布局特点
- **顶部导航栏**：固定头部，显示连接状态
- **抽屉菜单**：左滑打开控制面板
- **卡片式设计**：清晰的信息层次
- **底部安全区域**：适配现代手机设计

### 交互优化
- **大按钮设计**：48px高度确保易点击
- **滑动手势**：支持抽屉滑动
- **震动反馈**：操作确认（如支持）
- **长按菜单**：快捷操作

### 视觉效果
- **圆角设计**：12px圆角增加现代感
- **阴影效果**：层次分明的卡片阴影
- **颜色标识**：直观的状态颜色
- **进度显示**：实时传输进度

## 🔧 技术实现

### 响应式检测
```typescript
const mobileInfo = useMobile();
const { isMobile, isIOS, isAndroid, deviceType } = mobileInfo;
```

### 设备适配
- **CSS媒体查询**：@media (max-width: 768px)
- **JavaScript检测**：navigator.userAgent + window.innerWidth
- **动态布局**：根据设备类型切换布局组件
- **性能优化**：移动端专用优化策略

### 移动端工具函数
- `preventBounce()`: 防止iOS橡皮筋效果
- `hideAddressBar()`: 隐藏Safari地址栏
- `optimizePerformance()`: 性能优化
- `getSafeArea()`: 获取安全区域信息

## 📋 支持的设备

### 测试设备
- ✅ 小米14 (Android + Chrome)
- ✅ 联想Y700四代 (Android + Chrome)
- ✅ iPhone系列 (iOS + Safari/Chrome)
- ✅ iPad系列 (iPadOS + Safari/Chrome)

### 浏览器支持
- ✅ Chrome Mobile 70+
- ✅ Safari Mobile 12+
- ✅ Firefox Mobile 68+
- ✅ Edge Mobile 79+

## 🚀 使用方法

### 启动应用
```bash
# 启动服务端
cd server
npm install
npm start

# 启动客户端
cd client
npm install
npm run dev
```

### 移动端访问
1. 确保手机和电脑在同一局域网
2. 在手机浏览器访问：`http://[电脑IP]:5173`
3. 输入客户端名称并连接
4. 开始传输文件

### 最佳实践
- **网络环境**：建议使用5GHz WiFi
- **文件大小**：单文件建议不超过100MB
- **同时连接**：支持多设备同时在线
- **续传功能**：断线重连自动恢复

## 📱 移动端操作指南

### 连接设备
1. 点击左上角菜单图标
2. 输入设备名称
3. 点击"连接服务器"

### 发送文件
1. 在主界面点击"选择文件"
2. 从相册/文件管理器选择文件
3. 打开侧边栏，选择目标设备
4. 点击"发送文件"

### 接收文件
1. 等待其他设备发送
2. 在传输记录中查看进度
3. 完成后点击"下载"按钮
4. 文件自动保存到下载文件夹

## 🔧 故障排除

### 连接问题
- 检查设备是否在同一局域网
- 确认防火墙未阻止连接
- 尝试刷新页面重新连接

### 传输问题
- 检查网络稳定性
- 确认文件大小不超过限制
- 尝试分批传输大文件

### 移动端问题
- 清除浏览器缓存
- 检查是否为最新版Chrome
- 尝试横屏/竖屏切换

## 🛠️ 开发说明

### 项目结构
```
client/src/
├── hooks/
│   ├── useWebRTC.ts     # WebRTC核心逻辑
│   └── useMobile.ts     # 移动端检测和优化
├── types/
│   └── webRTC.ts        # 类型定义
├── App.tsx              # 主应用组件
├── App.css              # 基础样式
└── mobile.css           # 移动端专用样式
```

### 关键技术
- **React 18**: 现代React特性
- **Ant Design**: 组件库
- **WebRTC**: P2P文件传输
- **WebSocket**: 信令服务器
- **TypeScript**: 类型安全

### 自定义Hook
- `useWebRTC`: WebRTC连接和文件传输
- `useMobile`: 移动端设备检测和优化

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

---

> 专为现代移动设备优化的局域网文件传输解决方案